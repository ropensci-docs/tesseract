<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tesseract">
<title>Using the Tesseract OCR engine in R • tesseract</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using the Tesseract OCR engine in R">
<meta property="og:description" content="tesseract">
<meta property="og:image" content="https://docs.ropensci.org/tesseract/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">tesseract</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">5.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">Using the Tesseract OCR engine in R</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/tesseract/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using the Tesseract OCR engine in R</h1>
            
            <h4 data-toc-skip class="date">2024-03-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/tesseract/blob/HEAD/vignettes/intro.Rmd" class="external-link"><code>vignettes/intro.Rmd</code></a></small>
      <div class="d-none name"><code>intro.Rmd</code></div>
    </div>

    
    
<p>The tesseract package provides R bindings <a href="https://github.com/tesseract-ocr/tesseract" class="external-link">Tesseract</a>: a powerful optical character recognition (OCR) engine that supports over 100 languages. The engine is highly configurable in order to tune the detection algorithms and obtain the best possible results.</p>
<p>Keep in mind that OCR (pattern recognition in general) is a very difficult problem for computers. Results will rarely be perfect and the accuracy rapidly decreases with the quality of the input image. But if you can get your input images to reasonable quality, Tesseract can often help to extract most of the text from the image.</p>
<div class="section level2">
<h2 id="extract-text-from-images">Extract Text from Images<a class="anchor" aria-label="anchor" href="#extract-text-from-images"></a>
</h2>
<p>OCR is the process of finding and recognizing text inside images, for example from a screenshot, scanned paper. The image below has some example text:</p>
<div class="figure">
<img src="https://jeroen.github.io/images/testocr.png" data-external="1" alt=""><p class="caption">test</p>
</div>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tesseract/">tesseract</a></span><span class="op">)</span></span>
<span><span class="va">eng</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"eng"</span><span class="op">)</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu">tesseract</span><span class="fu">::</span><span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="st">"http://jeroen.github.io/images/testocr.png"</span>, engine <span class="op">=</span> <span class="va">eng</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## This is a lot of 12 point text to test the</span></span>
<span><span class="co">## ocr code and see if it works on all types</span></span>
<span><span class="co">## of file format.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## The quick brown dog jumped over the</span></span>
<span><span class="co">## lazy fox. The quick brown dog jumped</span></span>
<span><span class="co">## over the lazy fox. The quick brown dog</span></span>
<span><span class="co">## jumped over the lazy fox. The quick</span></span>
<span><span class="co">## brown dog jumped over the lazy fox.</span></span></code></pre>
<p>Not bad! The <code><a href="../reference/ocr.html">ocr_data()</a></code> function returns all words in the image along with a bounding box and confidence rate.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">tesseract</span><span class="fu">::</span><span class="fu"><a href="../reference/ocr.html">ocr_data</a></span><span class="op">(</span><span class="st">"http://jeroen.github.io/images/testocr.png"</span>, engine <span class="op">=</span> <span class="va">eng</span><span class="op">)</span></span>
<span><span class="va">results</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 60 × 3</span></span></span>
<span><span class="co">##    word  confidence bbox          </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> This        96.6 36,92,96,116  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> is          96.9 109,92,129,116</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> a           96.3 141,98,156,116</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> lot         96.3 169,92,201,116</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> of          96.5 212,92,240,116</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 12          96.5 251,92,282,116</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> point       96.5 296,92,364,122</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> text        96.5 374,93,427,116</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> to          96.9 437,93,463,116</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> test        97.0 474,93,526,116</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 50 more rows</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="language-data">Language Data<a class="anchor" aria-label="anchor" href="#language-data"></a>
</h2>
<p>The tesseract OCR engine uses language-specific training data in the recognize words. The OCR algorithms bias towards words and sentences that frequently appear together in a given language, just like the human brain does. Therefore the most accurate results will be obtained when using training data in the correct language.</p>
<p>Use <code><a href="../reference/tesseract.html">tesseract_info()</a></code> to list the languages that you currently have installed.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tesseract.html">tesseract_info</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $datapath</span></span>
<span><span class="co">## [1] "/usr/share/tesseract-ocr/4.00/tessdata/"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $available</span></span>
<span><span class="co">## [1] "eng" "osd"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $version</span></span>
<span><span class="co">## [1] "4.1.1"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $configs</span></span>
<span><span class="co">##  [1] "alto"             "ambigs.train"     "api_config"       "bigram"          </span></span>
<span><span class="co">##  [5] "box.train"        "box.train.stderr" "digits"           "get.images"      </span></span>
<span><span class="co">##  [9] "hocr"             "inter"            "kannada"          "linebox"         </span></span>
<span><span class="co">## [13] "logfile"          "lstm.train"       "lstmbox"          "lstmdebug"       </span></span>
<span><span class="co">## [17] "makebox"          "pdf"              "quiet"            "rebox"           </span></span>
<span><span class="co">## [21] "strokewidth"      "tsv"              "txt"              "unlv"            </span></span>
<span><span class="co">## [25] "wordstrbox"</span></span></code></pre>
<p>By default the R package only includes English training data. Windows and Mac users can install additional training data using <code><a href="../reference/tessdata.html">tesseract_download()</a></code>. Let’s OCR a screenshot from Wikipedia in Dutch (Nederlands)</p>
<p><a href="https://nl.wikipedia.org/wiki/Geschiedenis_van_de_stad_Utrecht" class="external-link"><img src="https://jeroen.github.io/images/utrecht2.png" alt="utrecht"></a></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Only need to do download once:</span></span>
<span><span class="fu"><a href="../reference/tessdata.html">tesseract_download</a></span><span class="op">(</span><span class="st">"nld"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Now load the dictionary</span></span>
<span><span class="op">(</span><span class="va">dutch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"nld"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="st">"https://jeroen.github.io/images/utrecht2.png"</span>, engine <span class="op">=</span> <span class="va">dutch</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<p>As you can see immediately: almost perfect! (OK just take my word).</p>
</div>
<div class="section level2">
<h2 id="preprocessing-with-magick">Preprocessing with Magick<a class="anchor" aria-label="anchor" href="#preprocessing-with-magick"></a>
</h2>
<p>The accuracy of the OCR process depends on the quality of the input image. You can often improve results by properly scaling the image, removing noise and artifacts or cropping the area where the text exists. See <a href="https://github.com/tesseract-ocr/tesseract/wiki/ImproveQuality" class="external-link">tesseract wiki: improve quality</a> for important tips to improve the quality of your input image.</p>
<p>The awesome <a href="https://cran.r-project.org/package=magick/vignettes/intro.html" class="external-link">magick</a> R package has many useful functions that can be use for enhancing the quality of the image. Some things to try:</p>
<ul>
<li>If your image is skewed, use <code><a href="https://docs.ropensci.org/magick/reference/transform.html" class="external-link">image_deskew()</a></code> and <code><a href="https://docs.ropensci.org/magick/reference/transform.html" class="external-link">image_rotate()</a></code> make the text horizontal.</li>
<li>
<code><a href="https://docs.ropensci.org/magick/reference/transform.html" class="external-link">image_trim()</a></code> crops out whitespace in the margins. Increase the <code>fuzz</code> parameter to make it work for noisy whitespace.</li>
<li>Use <code><a href="https://docs.ropensci.org/magick/reference/editing.html" class="external-link">image_convert()</a></code> to turn the image into greyscale, which can reduce artifacts and enhance actual text.</li>
<li>If your image is very large or small resizing with <code><a href="https://docs.ropensci.org/magick/reference/transform.html" class="external-link">image_resize()</a></code> can help tesseract determine text size.</li>
<li>Use <code><a href="https://docs.ropensci.org/magick/reference/color.html" class="external-link">image_modulate()</a></code> or <code><a href="https://docs.ropensci.org/magick/reference/color.html" class="external-link">image_contrast()</a></code> or <code><a href="https://docs.ropensci.org/magick/reference/color.html" class="external-link">image_contrast()</a></code> to tweak brightness / contrast if this is an issue.</li>
<li>Try <code><a href="https://docs.ropensci.org/magick/reference/effects.html" class="external-link">image_reducenoise()</a></code> for automated noise removal. Your mileage may vary.</li>
<li>With <code><a href="https://docs.ropensci.org/magick/reference/color.html" class="external-link">image_quantize()</a></code> you can reduce the number of colors in the image. This can sometimes help with increasing contrast and reducing artifacts.</li>
<li>True imaging ninjas can use <code><a href="https://docs.ropensci.org/magick/reference/morphology.html" class="external-link">image_convolve()</a></code> to use custom <a href="https://ropensci.org/technotes/2017/11/02/image-convolve/" class="external-link">convolution methods</a>.</li>
</ul>
<p>Below is an example OCR scan. The code converts it to black-and-white and resizes + crops the image before feeding it to tesseract to get more accurate OCR results.</p>
<div class="figure">
<img src="https://jeroen.github.io/images/bowers.jpg" data-external="1" alt=""><p class="caption">bowers</p>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/magick/" class="external-link">magick</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'magick' was built under R version 4.3.3</span></span></code></pre>
<pre><code><span><span class="co">## Linking to ImageMagick 6.9.11.60</span></span>
<span><span class="co">## Enabled features: fontconfig, freetype, fftw, heic, lcms, pango, webp, x11</span></span>
<span><span class="co">## Disabled features: cairo, ghostscript, raw, rsvg</span></span></code></pre>
<pre><code><span><span class="co">## Using 4 threads</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/magick/reference/editing.html" class="external-link">image_read</a></span><span class="op">(</span><span class="st">"https://jeroen.github.io/images/bowers.jpg"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="va">input</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/magick/reference/transform.html" class="external-link">image_resize</a></span><span class="op">(</span><span class="st">"2000x"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/magick/reference/editing.html" class="external-link">image_convert</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">'Grayscale'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/magick/reference/transform.html" class="external-link">image_trim</a></span><span class="op">(</span>fuzz <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/magick/reference/editing.html" class="external-link">image_write</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">'png'</span>, density <span class="op">=</span> <span class="st">'300x300'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tesseract</span><span class="fu">::</span><span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## The Life and Work of</span></span>
<span><span class="co">## Fredson Bowers</span></span>
<span><span class="co">## by</span></span>
<span><span class="co">## G. THOMAS TANSELLE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## N EVERY FIELD OF ENDEAVOR THERE ARE A FEW FIGURES WHOSE ACCOM-</span></span>
<span><span class="co">## plishment and influence cause them to be the symbols of their age;</span></span>
<span><span class="co">## their careers and oeuvres become the touchstones by which the</span></span>
<span><span class="co">## field is measured and its history told. In the related pursuits of</span></span>
<span><span class="co">## analytical and descriptive bibliography, textual criticism, and scholarly</span></span>
<span><span class="co">## editing, Fredson Bowers was such a figure, dominating the four decades</span></span>
<span><span class="co">## after 1949, when his Principles of Bibliographical Description was pub-</span></span>
<span><span class="co">## lished. By 1973 the period was already being called “‘the age of Bowers”:</span></span>
<span><span class="co">## in that year Norman Sanders, writing the chapter on textual scholarship</span></span>
<span><span class="co">## for Stanley Wells's Shakespeare: Select Bibliographies, gave this title to</span></span>
<span><span class="co">## a section of his essay. For most people, it would be achievement enough</span></span>
<span><span class="co">## to rise to such a position in a field as complex as Shakespearean textual</span></span>
<span><span class="co">## studies; but Bowers played an equally important role in other areas.</span></span>
<span><span class="co">## Editors of nineteenth-century American authors, for example, would</span></span>
<span><span class="co">## also have to call the recent past “the age of Bowers,” as would the writers</span></span>
<span><span class="co">## of descriptive bibliographies of authors and presses. His ubiquity in</span></span>
<span><span class="co">## the broad field of bibliographical and textual study, his seemingly com-</span></span>
<span><span class="co">## plete possession of it, distinguished him from his illustrious predeces-</span></span>
<span><span class="co">## sors and made him the personification of bibliographical scholarship in</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## his time.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## When in 1969 Bowers was awarded the Gold Medal of the Biblio-</span></span>
<span><span class="co">## graphical Society in London, John Carter’s citation referred to the</span></span>
<span><span class="co">## Principles as “majestic,” called Bowers’s current projects “formidable,”</span></span>
<span><span class="co">## said that he had “imposed critical discipline” on the texts of several</span></span>
<span><span class="co">## authors, described Studies in Bibliography as a “great and continuing</span></span>
<span><span class="co">## achievement,” and included among his characteristics “uncompromising</span></span>
<span><span class="co">## seriousness of purpose” and “professional intensity.” Bowers was not</span></span>
<span><span class="co">## unaccustomed to such encomia, but he had also experienced his share of</span></span>
<span><span class="co">## attacks: his scholarly positions were not universally popular, and he</span></span>
<span><span class="co">## expressed them with an ageressiveness that almost seemed calculated to</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="read-from-pdf-files">Read from PDF files<a class="anchor" aria-label="anchor" href="#read-from-pdf-files"></a>
</h2>
<p>If your images are stored in PDF files they first need to be converted to a proper image format. We can do this in R using the <code>pdf_convert</code> function from the pdftools package. Use a high DPI to keep quality of the image.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pngfile</span> <span class="op">&lt;-</span> <span class="fu">pdftools</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/pdftools/reference/pdf_render_page.html" class="external-link">pdf_convert</a></span><span class="op">(</span><span class="st">'https://jeroen.github.io/images/ocrscan.pdf'</span>, dpi <span class="op">=</span> <span class="fl">600</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Converting page 1 to ocrscan_1.png... done!</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu">tesseract</span><span class="fu">::</span><span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">pngfile</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## | SAPORS LANE - BOOLE - DORSET - BH25 8 ER</span></span>
<span><span class="co">## TELEPHONE BOOLE (945 13) 51617 - TELEX 123456</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Our Ref. 350/PJC/EAC 18th January, 1972.</span></span>
<span><span class="co">## Dr. P.N. Cundall,</span></span>
<span><span class="co">## Mining Surveys Ltd.,</span></span>
<span><span class="co">## Holroyd Road,</span></span>
<span><span class="co">## Reading,</span></span>
<span><span class="co">## Berks.</span></span>
<span><span class="co">## Dear Pete,</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Permit me to introduce you to the facility of facsimile</span></span>
<span><span class="co">## transmission.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## In facsimile a photocell is caused to perform a raster scan over</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## the subject copy. The variations of print density on the document</span></span>
<span><span class="co">## cause the photocell to generate an analogous electrical video signal.</span></span>
<span><span class="co">## This signal is used to modulate a carrier, which is transmitted to a</span></span>
<span><span class="co">## remote destination over a radio or cable communications link.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## At the remote terminal, demodulation reconstructs the video</span></span>
<span><span class="co">## signal, which is used to modulate the density of print produced by a</span></span>
<span><span class="co">## printing device. This device is scanning in a raster scan synchronised</span></span>
<span><span class="co">## with that at the transmitting terminal. As a result, a facsimile</span></span>
<span><span class="co">## copy of the subject document is produced.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Probably you have uses for this facility in your organisation.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Yours sincerely,</span></span>
<span><span class="co">## 44, f</span></span>
<span><span class="co">## P.J. CROSS</span></span>
<span><span class="co">## Group Leader - Facsimile Research</span></span>
<span><span class="co">## Registered in England: No. 2038</span></span>
<span><span class="co">## No. 1 Registered Office: GO Vicara Lane, Ilford. Eseex.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="tesseract-control-parameters">Tesseract Control Parameters<a class="anchor" aria-label="anchor" href="#tesseract-control-parameters"></a>
</h2>
<p>Tesseract supports hundreds of “control parameters” which alter the OCR engine. Use <code><a href="../reference/tesseract.html">tesseract_params()</a></code> to list all parameters with their default value and a brief description. It also has a handy <code>filter</code> argument to quickly find parameters that match a particular string.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List all parameters with *colour* in name or description</span></span>
<span><span class="fu"><a href="../reference/tesseract.html">tesseract_params</a></span><span class="op">(</span><span class="st">'colour'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">##   param                      default desc                    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> editor_image_word_bb_color 7       Word bounding box colour</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> editor_image_blob_bb_color 4       Blob bounding box colour</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> editor_image_text_color    2       Correct text colour</span></span></code></pre>
<p>Do note that some of the control parameters have changed between Tesseract engine 3 and 4.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tesseract</span><span class="fu">::</span><span class="fu"><a href="../reference/tesseract.html">tesseract_info</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="st">'version'</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## $version</span></span>
<span><span class="co">## [1] "4.1.1"</span></span></code></pre>
<div class="section level3">
<h3 id="whitelist-blacklist-characters">Whitelist / Blacklist characters<a class="anchor" aria-label="anchor" href="#whitelist-blacklist-characters"></a>
</h3>
<p>One powerful parameter is <code>tessedit_char_whitelist</code> which restricts the output to a limited set of characters. This may be useful for reading for example numbers such as a bank account, zip code, or gas meter.</p>
<p>The whitelist parameter works for all versions of Tesseract engine 3 and also engine versions 4.1 and higher, but unfortunately it did not work in Tesseract 4.0.</p>
<div class="figure">
<img src="https://jeroen.github.io/images/receipt.png" data-external="1" alt=""><p class="caption">receipt</p>
</div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tessedit_char_whitelist <span class="op">=</span> <span class="st">"$.0123456789"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="st">"https://jeroen.github.io/images/receipt.png"</span>, engine <span class="op">=</span> <span class="va">numbers</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $90.52</span></span>
<span><span class="co">## $81.52</span></span>
<span><span class="co">## $9.00</span></span>
<span><span class="co">## $90.52</span></span></code></pre>
<p>To test if this actually works, look what happens if we remove the <code>$</code> from <code>tessedit_char_whitelist</code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Do not allow any dollar sign </span></span>
<span><span class="va">numbers2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tessedit_char_whitelist <span class="op">=</span> <span class="st">".0123456789"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="st">"https://jeroen.github.io/images/receipt.png"</span>, engine <span class="op">=</span> <span class="va">numbers2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 90.52</span></span>
<span><span class="co">## 81.52</span></span>
<span><span class="co">## 9.00</span></span>
<span><span class="co">## 90.52</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
